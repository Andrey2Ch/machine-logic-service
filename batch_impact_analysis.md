# –ê–Ω–∞–ª–∏–∑ –≤–ª–∏—è–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö –±–∞—Ç—á–µ–π

## üìä –ß—Ç–æ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `batches`:

### üîß **–ü—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- `initial_quantity` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ (—Ä–∞–∑–Ω–∏—Ü–∞ —Å—á–µ—Ç—á–∏–∫–∞)
- `operator_reported_quantity` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ 
- `recounted_quantity` - –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω–Ω–æ–µ –∫–ª–∞–¥–æ–≤—â–∏–∫–æ–º
- `current_quantity` - –∞–∫—Ç—É–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ
- `current_location` - —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å/–º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ

### üë• **–ö—Ç–æ —Ä–∞–±–æ—Ç–∞–ª:**
- `operator_id` - –∫–∞–∫–æ–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –ø—Ä–æ–∏–∑–≤–µ–ª
- `warehouse_employee_id` - –∫—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–ª –Ω–∞ —Å–∫–ª–∞–¥–µ
- `qc_inspector_id` - –∫—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–ª –û–¢–ö

### ‚è∞ **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏:**
- `batch_time` - –∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–Ω –±–∞—Ç—á
- `warehouse_received_at` - –∫–æ–≥–¥–∞ –ø—Ä–∏–Ω—è—Ç –Ω–∞ —Å–∫–ª–∞–¥–µ  
- `qa_date` - –∫–æ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω –û–¢–ö
- `created_at/updated_at` - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç–∫–∏

### üîç **–ö–∞—á–µ—Å—Ç–≤–æ –∏ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è:**
- `qc_comment` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –û–¢–ö
- `discrepancy_absolute/percentage` - —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–∏–µ–º–∫–µ
- `admin_acknowledged_discrepancy` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ –∞–¥–º–∏–Ω–æ–º —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è

### üîó **–°–≤—è–∑–∏:**
- `setup_job_id` - —Å–≤—è–∑—å —Å –Ω–∞–ª–∞–¥–∫–æ–π
- `lot_id` - —Å–≤—è–∑—å —Å –ª–æ—Ç–æ–º
- `parent_batch_id` - –∏–µ—Ä–∞—Ä—Ö–∏—è –±–∞—Ç—á–µ–π (—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ/—Å–ª–∏—è–Ω–∏–µ)

## ‚ö†Ô∏è **–ß–¢–û –ü–û–¢–ï–†–Ø–ï–ú –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏:**

### ‚ùå **–ù–ê–í–°–ï–ì–î–ê –ü–û–¢–ï–†–Ø–ï–¢–°–Ø:**
1. **–ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞** - –∫—Ç–æ, –∫–æ–≥–¥–∞, —Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–∏–∑–≤–µ–ª
2. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤** - –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –æ—à–∏–±–∫–∏
3. **–ö–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏** - –ø—Ä–æ—Ü–µ–Ω—Ç –±—Ä–∞–∫–∞, –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –û–¢–ö
4. **–ê—É–¥–∏—Ç —Å–∫–ª–∞–¥—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π** - —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–∏–µ–º–∫–µ
5. **–¢—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∞ –ø—Ä–æ–¥—É–∫—Ü–∏–∏** - –æ—Ç–∫—É–¥–∞ –ø—Ä–∏—à–ª–∞ –¥–µ—Ç–∞–ª—å
6. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø–æ –≤—Ä–µ–º–µ–Ω–∞–º** - —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –∫–∞–∂–¥–æ–º —ç—Ç–∞–ø–µ

### ‚úÖ **–ù–ï –ü–û–¢–ï–†–Ø–ï–ú:**
1. **–ü–æ–∫–∞–∑–∞–Ω–∏—è —Å—á–µ—Ç—á–∏–∫–æ–≤** - –æ–Ω–∏ –≤ —Ç–∞–±–ª–∏—Ü–µ `machine_readings`
2. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ª–æ—Ç–∞—Ö** - –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü–µ `lots`
3. **–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–ª–∞–¥–∫–∞—Ö** - –æ—Å—Ç–∞–µ—Ç—Å—è –≤ `setup_jobs`
4. **–°–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏ –º–∞—à–∏–Ω—ã** - –æ—Å—Ç–∞—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–∞–±–ª–∏—Ü–∞—Ö

## üéØ **–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø:**

### ‚ö†Ô∏è **–û–°–¢–û–†–û–ñ–ù–û! –ù–ï –†–ï–ö–û–ú–ï–ù–î–£–Æ –ü–û–õ–ù–û–ï –£–î–ê–õ–ï–ù–ò–ï**

–í–º–µ—Å—Ç–æ —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–µ–¥–ª–∞–≥–∞—é:

### 1Ô∏è‚É£ **–ê–†–•–ò–í–ò–†–û–í–ê–ù–ò–ï** (–±–µ–∑–æ–ø–∞—Å–Ω–æ):
```sql
-- –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –±–∞—Ç—á–∏ –≤ –∞—Ä—Ö–∏–≤–Ω—É—é —Ç–∞–±–ª–∏—Ü—É
CREATE TABLE batches_archive AS SELECT * FROM batches WHERE created_at < '2025-06-10';
-- –£–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∞—Ä—Ö–∏–≤–∞
```

### 2Ô∏è‚É£ **–í–´–ë–û–†–û–ß–ù–û–ï –£–î–ê–õ–ï–ù–ò–ï** (–∫–æ–º–ø—Ä–æ–º–∏—Å—Å):
```sql
-- –£–¥–∞–ª–∏—Ç—å —Ç–æ–ª—å–∫–æ "–ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ" —Å—Ç–∞—Ç—É—Å—ã, –æ—Å—Ç–∞–≤–∏—Ç—å –≤–∞–∂–Ω—ã–µ
DELETE FROM batches 
WHERE created_at < '2025-06-10' 
AND current_location IN ('production', 'inspection')
-- –ù–ï —É–¥–∞–ª—è–µ–º 'warehouse_counted', 'good', 'defect', 'archived'
```

### 3Ô∏è‚É£ **–ü–†–û–°–¢–û –°–ö–†–´–¢–¨** (—Å–∞–º–æ–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ):
```sql
-- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ is_archived –∏ —Å–∫—Ä—ã–≤–∞—Ç—å –≤ UI
ALTER TABLE batches ADD COLUMN is_archived BOOLEAN DEFAULT FALSE;
UPDATE batches SET is_archived = TRUE WHERE created_at < '2025-06-10';
```

## ‚ö° **–ë–´–°–¢–†–û–ï –†–ï–®–ï–ù–ò–ï –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ –¥–∞—à–±–æ—Ä–¥–∞:**

–ï—Å–ª–∏ —Ü–µ–ª—å - –ø—Ä–æ—Å—Ç–æ –æ—á–∏—Å—Ç–∏—Ç—å —Å–ø–∏—Å–∫–∏ –≤ –¥–∞—à–±–æ—Ä–¥–µ, –º–æ–∂–Ω–æ –ø—Ä–æ—Å—Ç–æ **–∏–∑–º–µ–Ω–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –≤ API** —á—Ç–æ–±—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –±–∞—Ç—á–∏ —Å —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã, –±–µ–∑ —É–¥–∞–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ë–î.

## üõ°Ô∏è **–ë–ï–ó–û–ü–ê–°–ù–û–°–¢–¨:**

- **–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —Å–¥–µ–ª–∞–π BACKUP** –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏
- **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –Ω–∞ –∫–æ–ø–∏–∏ –ë–î** —Å–Ω–∞—á–∞–ª–∞  
- **–ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –Ω–µ—Ç FK constraints** –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–±–ª–æ–∫–∏—Ä—É—é—Ç —É–¥–∞–ª–µ–Ω–∏–µ 